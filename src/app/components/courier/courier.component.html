<div class="courier-screen">
  <h2>Painel Motoboy</h2>

  <button (click)="loadOrders()">Atualizar Pedidos</button>

  <div *ngIf="loading" class="loading-message">
    <p>Carregando...</p>
  </div>

  <div *ngIf="errorMessage" class="error-message">
    <p>{{ errorMessage }}</p>
  </div>

  <div *ngIf="!loading && orders.length === 0 && !errorMessage" class="empty-message">
    <p>Nenhum pedido ativo para entrega no momento.</p>
  </div>

  <div class="order-list-container" *ngIf="!loading && orders.length > 0">
    
    <div class="order-group pickup-orders">
      
      <h3 *ngIf="ordersToPickUp.length > 0">ðŸš¨ Para Pegar e Sair ({{ ordersToPickUp.length }})</h3>
      
      <div *ngIf="ordersToPickUp.length === 0" class="group-empty-message">
        <p>Nenhum pedido pronto para retirada.</p>
      </div>

      <div *ngFor="let order of ordersToPickUp" class="order-card card-new">
        <div class="card-header">
          <span class="order-id">#{{ order.id }}</span>
          <span class="order-status status-READY_FOR_DELIVERY">Pronto para Retirar</span>
        </div>
        
        <div class="card-details">
          <p class="detail-item total-amount">
            <span class="label">Total:</span>
            {{ order.total | currency:'BRL':'symbol':'1.2-2' }}
          </p>
          <p class="detail-item">
            <span class="label">Pronto em:</span> 
            {{ order.createdAt | date:'shortTime' }}
          </p>
        </div>

        <div class="card-actions">
          <button
            (click)="updateStatus(order, 'EN_ROUTE')"
            class="action-button route-button">
            Pegar e Sair (A caminho)
          </button>
        </div>
      </div>
    </div>
    
    <div class="order-group en-route-orders">
      
      <h3 *ngIf="ordersEnRoute.length > 0">ðŸ›µ A Caminho ({{ ordersEnRoute.length }})</h3>
      
      <div *ngIf="ordersEnRoute.length === 0" class="group-empty-message">
        <p>Nenhum pedido em rota de entrega.</p>
      </div>

      <div *ngFor="let order of ordersEnRoute" class="order-card card-en-route">
        <div class="card-header">
          <span class="order-id">#{{ order.id }}</span>
          <span class="order-status status-EN_ROUTE">Em Rota</span>
        </div>
        
        <div class="card-details">
          <p class="detail-item total-amount">
            <span class="label">Total:</span>
            {{ order.total | currency:'BRL':'symbol':'1.2-2' }}
          </p>
          <p class="detail-item">
            <span class="label">Iniciado Ã s:</span> 
            {{ order.createdAt | date:'shortTime' }}
          </p>
        </div>

        <div class="card-actions">
          <button
            (click)="updateStatus(order, 'DELIVERED')"
            class="action-button delivered-button">
            Confirmar Entrega
          </button>
        </div>
      </div>
    </div>
  </div>

  </div>